/**
 * LiveBlocks 0.1.0
 * https://github.com/jlapolla/live-blocks
 *
 * Copyright (c) 2016 Justin LaPolla
 * Released under the MIT license
 */

"use strict";this.LiveBlocks={},function(t){var i={};(function(t){this.getUndefined=function(){},this.extendClass=function(t,i){var e=function(){};e.prototype=t.prototype,i.prototype=new e,i.prototype.constructor=i},this.hasOwnProperty=function(){var t={}.hasOwnProperty;return function(i,e){return t.call(i,e)}}(),this.multiInheritClass=function(t,i){for(var e in t.prototype)"constructor"!==e&&(i.prototype[e]=t.prototype[e])},this.isArray=function(){var t={}.toString;return function(i){return"[object Array]"===t.call(i)}}(),this.isObject=function(t){return function(i){return"object"==typeof i&&!t(i)}}(this.isArray),this.maxIterations=function(){var t=100;return function(i){return arguments.length?void(t=i):t}}(),this.ArrayIterator=function(){function t(t){this._array=t,this._index=0}t.prototype={};var i=t.prototype;return i.reset=function(){this._index=0},i.next=function(){return this._index<this._array.length?{done:!1,value:this._array[this._index++]}:{done:!0}},i.peek=function(){return this._index<this._array.length?{done:!1,value:this._array[this._index]}:{done:!0}},t}(),this.Queue=function(t){function i(){this._queueTip=t(),this._queueCurrent=t()}i.prototype={};var e=i.prototype;return e.push=function(t){var i={item:t};return this._queueCurrent?(this._queueTip.next=i,void(this._queueTip=i)):(this._queueCurrent=i,void(this._queueTip=i))},e.next=function(){if(this._queueCurrent){var i=this._queueCurrent.item;return this._queueCurrent===this._queueTip?(this._queueCurrent=t(),this._queueTip=t()):this._queueCurrent=this._queueCurrent.next,i}},e.peek=function(){return this._queueCurrent?this._queueCurrent.item:void 0},e.isEmpty=function(){return!this._queueCurrent},i}(this.getUndefined),this.Set=function(t){function i(){this._array=[]}var e=function(t,i){return t!==t?i!==i:t===i};i.prototype={};var r=i.prototype;return r.add=function(t){for(var i=this._array,r=[],n=0;n<i.length;n++)e(i[n],t)||r.push(i[n]);r.push(t),this._array=r},r.remove=function(t){for(var i=this._array,r=[],n=0;n<i.length;n++)e(i[n],t)||r.push(i[n]);this._array=r},r.has=function(t){for(var i=this._array,r=0;r<i.length;r++)if(e(i[r],t))return!0;return!1},r.values=function(){return new t(this._array)},i}(this.ArrayIterator),this.Map=function(t){function i(){this._array=[]}var e=function(t,i){return t!==t?i!==i:t===i};i.prototype={};var r=i.prototype;return r.get=function(t){for(var i=this._array,r=0;r<i.length;r++)if(e(i[r].key,t))return i[r].value},r.put=function(t,i){for(var r=this._array,n=[],s=0;s<r.length;s++)e(r[s].key,t)||n.push(r[s]);n.push({key:t,value:i}),this._array=n},r.remove=function(t){for(var i=this._array,r=[],n=0;n<i.length;n++)e(i[n].key,t)||r.push(i[n]);this._array=r},r.has=function(t){for(var i=this._array,r=0;r<i.length;r++)if(e(i[r].key,t))return!0;return!1},r.keys=function(){for(var i=this._array,e=[],r=0;r<i.length;r++)e.push(i[r].key);return new t(e)},i}(this.ArrayIterator),this.EventEmitter=function(t){function i(){this._listeners={}}i.prototype={};var e=i.prototype;return e.on=function(i,e){var r;r=t(this._listeners,i)?this._listeners[i]:[];for(var n,s=[],h=0;h<r.length;h++)s.push(r[h]),r[h]===e&&(n=!0);n||s.push(e),this._listeners[i]=s},e.off=function(i,e){var r;if(t(this._listeners,i)){r=this._listeners[i];for(var n=[],s=0;s<r.length;s++)r[s]!==e&&n.push(r[s]);n.length?this._listeners[i]=n:delete this._listeners[i]}},e.fire=function(i,e){var r;if(t(this._listeners,i))if(r=this._listeners[i],arguments.length>1)for(var n=0;n<r.length;n++)r[n](e);else for(var n=0;n<r.length;n++)r[n]()},i}(this.hasOwnProperty),this.Wire=function(t,i,e,r,n,s,h,a){function o(){n.call(this),this._bindings=[],this._updating=!1,this._valueQueue=new e}var u=function(){for(var t=this._bindings,i=0;i<t.length;i++)t[i].block.update(t[i].pin)};s(n,o);var l=o.prototype;return l.equalTo=function(t){return t!==t?this._value!==this._value:t===this._value},l.bind=function(t,i){for(var e,r=this._bindings,n=[],s=0;s<r.length;s++)n.push(r[s]),r[s].block===t&&r[s].pin===i&&(e=!0);e||n.push({block:t,pin:i}),this._bindings=n,e||this.fire("connect",{block:t,pin:i})},l.unbind=function(t,i){for(var e=this._bindings,r=[],n=0;n<e.length;n++)(e[n].block!==t||e[n].pin!==i)&&r.push(e[n]);this._bindings=r,e.length!==r.length&&this.fire("disconnect",{block:t,pin:i})},l.value=function(t){try{if(!arguments.length)return this._value;if(this._updating)return void(this.equalTo(t)||this._valueQueue.push(t));this._updating=!0;for(var i=1;;){if(i++>a())throw new r("Infinite loop detected: reached "+a()+" iterations");if(this.equalTo(t)||(this._value=t,u.call(this),this.fire("value",t)),this._valueQueue.isEmpty())return void(this._updating=!1);t=this._valueQueue.next()}}catch(e){throw this._updating=!1,e}},l.connections=function(){for(var t=[],i=this._bindings,e=0;e<i.length;e++)t.push({block:i[e].block,pin:i[e].pin});return new h(t)},o}(this.getUndefined,this.hasOwnProperty,this.Queue,t.Error,this.EventEmitter,this.extendClass,this.ArrayIterator,this.maxIterations),this.ImmediateBlock=function(t,i,e,r,n,s,h){function a(t){n.call(this),this._pins={},this._wires={},this._updating=!1,this._updateQueue=new i;for(var e in t.pins)this._pins[e]=t.pins[e]}var o=function(i){if(t(this._wires,i)){var e=this._wires[i];e.unbind(this,i),delete this._wires[i],this.fire("disconnect",{pin:i,wire:e})}};r(n,a);var u=a.prototype;return u.error=function(){return this._lastError},u.connect=function(i,r){if(!t(this._pins,i))throw new e('Pin "'+i+'" not found');this._wires[i]!==r&&(o.call(this,i),this._wires[i]=r,r.bind(this,i),this.fire("connect",{pin:i,wire:r}),this.update(i))},u.disconnect=function(i){if(t(this._wires,i)){var e=this._wires[i];e.unbind(this,i),delete this._wires[i],this.update(i),this.fire("disconnect",{pin:i,wire:e})}},u.update=function(i){try{if(this._updating)return void this._updateQueue.push(i);this._updating=!0;for(var r=1;;){if(r++>h())throw new e("Infinite loop detected: reached "+h()+" iterations");var n={},s={};for(var a in this._wires)n[a]=this._wires[a],s[a]=n[a].value();this.fire("update",{pin:i,value:s[i]});try{var o={},u=this._pins[i];u(s,o),delete this._lastError;for(var a in n)t(o,a)&&n[a].value(o[a]);this.fire("success")}catch(l){this._lastError=l,this.fire("error",l)}if(this._updateQueue.isEmpty())return void(this._updating=!1);i=this._updateQueue.next()}}catch(c){throw this._updating=!1,c}},u.pins=function(){var t=[];for(var i in this._pins)t.push({pin:i,wire:this._wires[i]});return new s(t)},a}(this.hasOwnProperty,this.Queue,t.Error,this.extendClass,this.EventEmitter,this.ArrayIterator,this.maxIterations),this.ClockedBlock=function(t,i,e,r,n){function s(i){t.call(this),this._pins={},this._wires={},this._do=i["do"];for(var e=0;e<i.pins.length;e++)this._pins[i.pins[e]]=this._pins}i(t,s);var h=s.prototype;return h.error=function(){return this._lastError},h.connect=function(t,i){if(!e(this._pins,t))throw Error('Pin "'+t+'" not found');this._wires[t]!==i&&(this.disconnect(t),this._wires[t]=i,i.bind(this,t),this.fire("connect",{pin:t,wire:i}))},h.disconnect=function(t){if(e(this._wires,t)){var i=this._wires[t];i.unbind(this,t),delete this._wires[t],this.fire("disconnect",{pin:t,wire:i})}},h.update=r,h.pins=function(){var t=[];for(var i in this._pins)t.push({pin:i,wire:this._wires[i]});return new n(t)},h.clock=function(t){return arguments.length?void(this._clock!==t&&(this.unsetClock(),this._clock=t,t.bind(this))):this._clock},h.unsetClock=function(){if(e(this,"_clock")){var t=this._clock;t.unbind(this),delete this._clock}},h.tick=function(){var t={};for(var i in this._wires)t[i]=this._wires[i].value();this.fire("tick");try{var e=this._do,r={};e(t,r),delete this._lastError,this._nextValues=r}catch(n){this._lastError=n,this.fire("error",n)}},h.tock=function(){if(this._nextValues){var t={};for(var i in this._wires)t[i]=this._wires[i];for(var i in this._nextValues)e(t,i)&&t[i].value(this._nextValues[i]);delete this._nextValues,this.fire("tock")}},s}(this.EventEmitter,this.extendClass,this.hasOwnProperty,this.getUndefined,this.ArrayIterator),this.TimedBlock=function(t,i,e,r,n){function s(i){t.call(this),this._pins={},this._wires={},this._do=i["do"],this._previousValues={};for(var e=0;e<i.pins.length;e++)this._pins[i.pins[e]]=this._pins}var h=function(t){if(e(this._wires,t)){var i=this._wires[t];i.unbind(this,t),delete this._wires[t],this.fire("disconnect",{pin:t,wire:i})}};i(t,s);var a=s.prototype;return a.error=function(){return this._lastError},a.connect=function(t,i){if(!e(this._pins,t))throw new r('Pin "'+t+'" not found');this._wires[t]!==i&&(h.call(this,t),this._wires[t]=i,i.bind(this,t),this.fire("connect",{pin:t,wire:i}),this.update(t))},a.disconnect=function(t){if(e(this._wires,t)){var i=this._wires[t];i.unbind(this,t),delete this._wires[t],this.update(t),this.fire("disconnect",{pin:t,wire:i})}},a.update=function(){this._timer.schedule(this)},a.pins=function(){var t=[];for(var i in this._pins)t.push({pin:i,wire:this._wires[i]});return new n(t)},a.timer=function(t){return arguments.length?(this.unsetTimer(),void(this._timer=t)):this._timer},a.unsetTimer=function(){delete this._timer},a.tick=function(){var t,i={};for(var r in this._wires)e(this._previousValues,r)&&this._wires[r].equalTo(this._previousValues[r])?i[r]=this._previousValues[r]:(t=!0,i[r]=this._wires[r].value());if(!t&&!this._tickRequested)for(var r in this._previousValues)e(i,r)||(t=!0);if(t||this._tickRequested||this._lastError){delete this._tickRequested,this.fire("tick");try{var n=this._do,s={};this._tickRequested=!!n(i,s,this._previousValues),delete this._lastError,this._nextValues=s;for(var r in s)e(i,r)&&(i[r]=s[r]);this._previousValues=i,this._tickRequested?this._timer.schedule(this):delete this._tickRequested}catch(h){this._lastError=h,this.fire("error",h)}}},a.tock=function(){if(this._nextValues){var t={};for(var i in this._wires)t[i]=this._wires[i];for(var i in this._nextValues)e(t,i)&&t[i].value(this._nextValues[i]);delete this._nextValues,this.fire("tock")}},s}(this.EventEmitter,this.extendClass,this.hasOwnProperty,t.Error,this.ArrayIterator),this.Clock=function(t,i,e){function r(){i.call(this),this._bindings=new t}e(i,r);var n=r.prototype;return n.tick=function(){for(var t=this._bindings.values();!t.peek().done;)t.next().value.tick();for(t.reset();!t.peek().done;)t.next().value.tock();this.fire("tick")},n.bind=function(t){this._bindings.add(t)},n.unbind=function(t){this._bindings.remove(t)},n.blocks=function(){return this._bindings.values()},r}(this.Set,this.EventEmitter,this.extendClass),this.ManualTimer=function(t,i,e){function r(){i.call(this),this._set=new t}e(i,r);var n=r.prototype;return n.tick=function(){var i=this._set.values();if(!i.peek().done){for(this._set=new t;!i.peek().done;)i.next().value.tick();for(i.reset();!i.peek().done;)i.next().value.tock();this.fire("tick")}},n.schedule=function(t){this._set.add(t)},n.cancel=function(i){arguments.length?this._set.remove(i):this._set=new t},r}(this.Set,this.EventEmitter,this.extendClass),this.AsyncTimer=function(t,i,e,r,n,s){function h(){s.call(this),this._set=new t,this._tick=a.bind(this),this._enabled=!0}var a=function(){delete this._timeoutId;var i=this._set.values();for(this._set=new t;!i.peek().done;)i.next().value.tick();for(i.reset();!i.peek().done;)i.next().value.tock();this.fire("tick")};n(s,h);var o=h.prototype;return o.schedule=function(t){this._set.add(t),this._enabled&&!i(this,"_timeoutId")&&(this._timeoutId=e(this._tick))},o.cancel=function(e){arguments.length?this._set.remove(e):this._set=new t,i(this,"_timeoutId")&&this._set.values().peek().done&&(r(this._timeoutId),delete this._timeoutId)},o.enabled=function(t){return arguments.length?void(t?(this._enabled=!0,i(this,"_timeoutId")||this._set.values().peek().done||(this._timeoutId=e(this._tick))):(this._enabled=!1,i(this,"_timeoutId")&&(r(this._timeoutId),delete this._timeoutId))):this._enabled},h}(this.Set,this.hasOwnProperty,t.setTimeout,t.clearTimeout,this.extendClass,this.EventEmitter),this.IntervalTimer=function(t,i,e,r,n,s){function h(){s.call(this),this._set=new t,this._tick=a.bind(this),this._enabled=!0,this._interval=40}var a=function(){var i=this._set.values();if(i.peek().done)delete this._timeoutId;else{for(this._timeoutId=e(this._tick,this._interval),this._set=new t;!i.peek().done;)i.next().value.tick();for(i.reset();!i.peek().done;)i.next().value.tock();this.fire("tick")}};n(s,h);var o=h.prototype;return o.schedule=function(t){this._set.add(t),this._enabled&&!i(this,"_timeoutId")&&(this._timeoutId=e(this._tick,this._interval))},o.cancel=function(e){arguments.length?this._set.remove(e):this._set=new t,i(this,"_timeoutId")&&this._set.values().peek().done&&(r(this._timeoutId),delete this._timeoutId)},o.enabled=function(t){return arguments.length?void(t?(this._enabled=!0,i(this,"_timeoutId")||this._set.values().peek().done||(this._timeoutId=e(this._tick,this._interval))):(this._enabled=!1,i(this,"_timeoutId")&&(r(this._timeoutId),delete this._timeoutId))):this._enabled},o.interval=function(t){return arguments.length?void(this._interval=t):this._interval},h}(this.Set,this.hasOwnProperty,t.setTimeout,t.clearTimeout,this.extendClass,this.EventEmitter),this.BlackBox=function(t,i,e,r,n,s,h,a,o,u){function l(i){t.call(this),this._updating=!1,this._internalWires={},this._externalWires={},this._updateQueue=new r,d.call(this,i.pins)}var c=function(t){this._updating||this.fire("error",t)},_=function(){if(!this._updating){var t=this._internalWires,i={};for(var e in t)this._externalWires[e]&&(i[e]=this._externalWires[e]);if(!this.error())for(var e in t)i[e]&&i[e].value(t[e].value())}},f=function(t){if(e(this._externalWires,t)){var i=this._externalWires[t];i.unbind(this,t),delete this._externalWires[t],this.fire("disconnect",{pin:t,wire:i})}},d=function(){var t,i;return t=function(t,e,r){if(!e.has(t)){e.add(t);for(var n=t.connections();!n.peek().done;)i.call(this,n.next().value.block,e,r)}},i=function(i,e,r){if(!r.has(i)){r.add(i),i.on("error",this._internalErrorListener);for(var n=i.pins();!n.peek().done;)t.call(this,n.next().value.wire,e,r)}},function(i){this._internalUpdateListener=_.bind(this),this._internalErrorListener=c.bind(this);var e=new h,r=new h;for(var n in i)this._internalWires[n]=i[n],i[n].on("value",this._internalUpdateListener),t.call(this,i[n],e,r);this._innerBlockSet=r}}();i(t,l);var p=l.prototype;return p.error=function(){for(var t=this._innerBlockSet.values();!t.peek().done;){var i=t.peek().value;if(i.error())return i.error();t.next()}},p.connect=function(t,i){if(!e(this._internalWires,t))throw new a('Pin "'+t+'" not found');this._externalWires[t]!==i&&(f.call(this,t),this._externalWires[t]=i,i.bind(this,t),this.fire("connect",{pin:t,wire:i}),this.update(t))},p.disconnect=function(t){if(e(this._externalWires,t)){var i=this._externalWires[t];i.unbind(this,t),delete this._externalWires[t],this.update(t),this.fire("disconnect",{pin:t,wire:i})}},p.update=function(t){try{if(this._updating)return void this._updateQueue.push(t);this._updating=!0;for(var i=1;;){if(i++>u())throw new a("Infinite loop detected: reached "+u()+" iterations");var r=this._internalWires,s={};for(var h in r)e(this._externalWires,h)&&(s[h]=this._externalWires[h]);var o;if(o=s[t]?s[t].value():n(),this.fire("update",{pin:t,value:o}),s[t]?r[t].value(s[t].value()):r[t].value(n()),this.error())this.fire("error",this.error());else{for(var h in r)e(s,h)&&s[h].value(r[h].value());this.fire("success")}if(this._updateQueue.isEmpty())return void(this._updating=!1);t=this._updateQueue.next()}}catch(l){throw this._updating=!1,l}},p.pins=function(){var t=[];for(var i in this._internalWires)t.push({pin:i,wire:this._externalWires[i]});return new o(t)},l}(this.EventEmitter,this.extendClass,this.hasOwnProperty,this.Queue,this.getUndefined,this.Map,this.Set,t.Error,this.ArrayIterator,this.maxIterations),this.ArrayRepeatBox=function(t,i,e,r,n,s,h,a,o){function u(i){t.call(this),this._factory=i.factory,this._externalWires={},this._internalWires=[],this._internalBlocks=[],this._updateQueue=new e,f.call(this)}var l=function(t){this._updating||this.fire("error",t)},c=function(){if(!this._updating){var t={};for(var i in this._pinNames)h(this._externalWires,i)&&(t[i]=this._externalWires[i]);if(!this.error())for(var i in this._pinNames)if(h(t,i)){for(var e=[],r=0;r<this._internalWires.length;r++)e.push(this._internalWires[r][i].value());t[i].value(e)}}},_=function(t){if(h(this._externalWires,t)){var i=this._externalWires[t];i.unbind(this,t),delete this._externalWires[t],this.fire("disconnect",{pin:t,wire:i})}},f=function(){this._pinNames={};var t=this._factory();for(var i in t)this._pinNames[i]=this._pinNames;this._internalUpdateListener=c.bind(this),this._internalErrorListener=l.bind(this)};i(t,u);var d=u.prototype;return d.error=function(){if(h(this,"_lastError"))return this._lastError;for(var t=0;t<this._internalBlocks.length;t++)if(this._internalBlocks[t].error())return this._internalBlocks[t].error()},d.connect=function(t,i){if(!h(this._pinNames,t))throw Error('Pin "'+t+'" not found');this._externalWires[t]!==i&&(_.call(this,t),this._externalWires[t]=i,i.bind(this,t),this.fire("connect",{pin:t,wire:i}),this.update(t))},d.disconnect=function(t){if(h(this._externalWires,t)){var i=this._externalWires[t];i.unbind(this,t),delete this._externalWires[t],this.update(t),this.fire("disconnect",{pin:t,wire:i})}},d.update=function(t){try{if(this._updating)return void this._updateQueue.push(t);this._updating=!0;for(var i=1;;){if(i++>o())throw Error("Infinite loop detected: reached "+o()+" iterations");var e={};for(var a in this._pinNames)h(this._externalWires,a)&&(e[a]=this._externalWires[a]);var u;if(u=h(e,t)?e[t].value():s(),this.fire("update",{pin:t,value:u}),r(u)){delete this._lastError;for(var l=0,c=[],_=[];l<u.length;l++){if(l<this._internalBlocks.length)c.push(this._internalWires[l]),_.push(this._internalBlocks[l]);else{var f=this._factory();for(var a in f)f[a].on("value",this._internalUpdateListener);var d=new n({pins:f});d.on("error",this._internalErrorListener),c.push(f),_.push(d)}c[l][t].value(u[l])}for(;l<this._internalBlocks.length;l++){var f=this._internalWires[l],d=this._internalBlocks[l];d.off("error",this._internalErrorListener);for(var a in f)f[a].off("value",this._internalUpdateListener),d.disconnect(a)}if(this._internalWires=c,this._internalBlocks=_,this.error())this.fire("error",this.error());else{for(var a in this._pinNames)if(h(e,a)){for(var p=[],l=0;l<c.length;l++)p.push(c[l][a].value());e[a].value(p)}this.fire("success")}}else this._lastError=Error("Pin "+t+" must be an array"),this.fire("error",this.error());if(this._updateQueue.isEmpty())return void(this._updating=!1);t=this._updateQueue.next()}}catch(v){throw this._updating=!1,v}},d.pins=function(){var t=[];for(var i in this._pinNames)t.push({pin:i,wire:this._externalWires[i]});return new a(t)},d.blocks=function(){for(var t=[],i=0;i<this._internalBlocks.length;i++)t.push({block:this._internalBlocks[i],index:i});return new a(t)},d.block=function(t){return this._internalBlocks[t]},u}(this.EventEmitter,this.extendClass,this.Queue,this.isArray,this.BlackBox,this.getUndefined,this.hasOwnProperty,this.ArrayIterator,this.maxIterations),this.ObjectRepeatBox=function(t,i,e,r,n,s,h,a,o){function u(i){t.call(this),this._factory=i.factory,this._externalWires={},this._internalWires={},this._internalBlocks={},this._updateQueue=new e,f.call(this)}var l=function(t){this._updating||this.fire("error",t)},c=function(){if(!this._updating){var t={};for(var i in this._pinNames)h(this._externalWires,i)&&(t[i]=this._externalWires[i]);if(!this.error())for(var i in this._pinNames)if(h(t,i)){var e={};for(var r in this._internalWires)e[r]=this._internalWires[r][i].value();t[i].value(e)}}},_=function(t){if(h(this._externalWires,t)){var i=this._externalWires[t];i.unbind(this,t),delete this._externalWires[t],this.fire("disconnect",{pin:t,wire:i})}},f=function(){this._pinNames={};var t=this._factory();for(var i in t)this._pinNames[i]=this._pinNames;this._internalUpdateListener=c.bind(this),this._internalErrorListener=l.bind(this)};i(t,u);var d=u.prototype;return d.error=function(){if(h(this,"_lastError"))return this._lastError;for(var t in this._internalBlocks)if(this._internalBlocks[t].error())return this._internalBlocks[t].error()},d.connect=function(t,i){if(!h(this._pinNames,t))throw Error('Pin "'+t+'" not found');this._externalWires[t]!==i&&(_.call(this,t),this._externalWires[t]=i,i.bind(this,t),this.fire("connect",{pin:t,wire:i}),this.update(t))},d.disconnect=function(t){if(h(this._externalWires,t)){var i=this._externalWires[t];i.unbind(this,t),delete this._externalWires[t],this.update(t),this.fire("disconnect",{pin:t,wire:i})}},d.update=function(t){try{if(this._updating)return void this._updateQueue.push(t);this._updating=!0;for(var i=1;;){if(i++>o())throw Error("Infinite loop detected: reached "+o()+" iterations");var e={};for(var a in this._pinNames)h(this._externalWires,a)&&(e[a]=this._externalWires[a]);var u;if(u=h(e,t)?e[t].value():s(),this.fire("update",{pin:t,value:u}),r(u)){delete this._lastError;var l={},c={};for(var a in u){if(h(this._internalBlocks,a))l[a]=this._internalWires[a],c[a]=this._internalBlocks[a];else{var _=this._factory();for(var f in _)_[f].on("value",this._internalUpdateListener);var d=new n({pins:_});d.on("error",this._internalErrorListener),l[a]=_,c[a]=d}l[a][t].value(u[a])}for(var a in this._internalBlocks)if(!h(u,a)){var _=this._internalWires[a],d=this._internalBlocks[a];d.off("error",this._internalErrorListener);for(var f in _)_[f].off("value",this._internalUpdateListener),d.disconnect(f)}if(this._internalWires=l,this._internalBlocks=c,this.error())this.fire("error",this.error());else{for(var f in this._pinNames)if(h(e,f)){var p={};for(var a in l)p[a]=l[a][f].value();e[f].value(p)}this.fire("success")}}else this._lastError=Error("Pin "+t+" must be an object"),this.fire("error",this.error());if(this._updateQueue.isEmpty())return void(this._updating=!1);t=this._updateQueue.next()}}catch(v){throw this._updating=!1,v}},d.pins=function(){var t=[];for(var i in this._pinNames)t.push({pin:i,wire:this._externalWires[i]});return new a(t)},d.blocks=function(){var t=[];for(var i in this._internalBlocks)t.push({block:this._internalBlocks[i],key:i});return new a(t)},d.block=function(t){return this._internalBlocks[t]},u}(this.EventEmitter,this.extendClass,this.Queue,this.isObject,this.BlackBox,this.getUndefined,this.hasOwnProperty,this.ArrayIterator,this.maxIterations)}).call(i,t);var e=["ArrayRepeatBox","AsyncTimer","BlackBox","Clock","ClockedBlock","ImmediateBlock","IntervalTimer","ManualTimer","ObjectRepeatBox","TimedBlock","Wire","maxIterations"];(function(t,i){for(var e=0;e<i.length;e++)this[i[e]]=t[i[e]]}).call(this,i,e)}.call(this.LiveBlocks,this);
